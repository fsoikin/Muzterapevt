(function(n,t){var i=typeof exports=="object"&&exports&&(typeof n=="object"&&n&&n==n.global&&(window=n),exports);typeof define=="function"&&define.amd?define(["rx","exports"],function(i,r){return n.Rx=t(n,r,i),n.Rx}):typeof module=="object"&&module&&module.exports==i?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)})(this,function(n,t,i,r){function it(n,t){return new f(function(i){return t.scheduleWithAbsolute(n,function(){i.onNext(0);i.onCompleted()})})}function b(n,t,i){var r=w(t);return new f(function(t){var f=0,u=n;return i.scheduleRecursiveWithAbsolute(u,function(n){var e;r>0&&(e=i.now(),u=u+r,u<=e&&(u=e+r));t.onNext(f++);n(u)})})}function rt(n,t){var i=w(n);return new f(function(n){return t.scheduleWithRelative(i,function(){n.onNext(0);n.onCompleted()})})}function k(n,t,i){return n===t?new f(function(n){return i.schedulePeriodicWithState(0,t,function(t){n.onNext(t);return t+1})}):v(function(){return b(i.now()+n,t,i)})}function d(n,t){var i=this;return new f(function(r){var e=!1,l=new s,f=null,u=[],h=!1,a;return a=i.materialize().timestamp(t).subscribe(function(i){var o,s;if(i.value.kind==="E"?(u=[],u.push(i),f=i.value.exception,s=!h):(u.push({value:i.value,timestamp:i.timestamp+n}),s=!e,e=!0),s)if(f!==null)r.onError(f);else o=new c,l.disposable(o),o.disposable(t.scheduleRecursiveWithRelative(n,function(n){var o,s,i,c;if(f===null){h=!0;do i=null,u.length>0&&u[0].timestamp-t.now()<=0&&(i=u.shift().value),i!==null&&i.accept(r);while(i!==null);if(c=!1,s=0,u.length>0?(c=!0,s=Math.max(0,u[0].timestamp-t.now())):e=!1,o=f,h=!1,o!==null)r.onError(o);else c&&n(s)}}))}),new o(a,l)})}function et(n,t){var i=this;return v(function(){var r=n-t.now();return d.call(i,r,t)})}function g(n,t){return new f(function(i){function e(){if(r){r=!1;i.onNext(f)}u&&i.onCompleted()}var u,f,r;return new o(n.subscribe(function(n){r=!0,f=n},i.onError.bind(i),function(){u=!0}),t.subscribe(e,i.onError.bind(i),e))})}var h=i.Observable,u=h.prototype,f=i.Internals.AnonymousObservable,v=h.defer,nt=h.empty,y=h.throwException,tt=h.fromArray,e=i.Scheduler.timeout,c=i.SingleAssignmentDisposable,s=i.SerialDisposable,o=i.CompositeDisposable,p=i.RefCountDisposable,l=i.Subject,ot=i.Internals.BinaryObserver,a=i.Internals.addRef,w=i.Scheduler.normalize,ut=h.interval=function(n,t){return t||(t=e),k(n,n,t)},ft=h.timer=function(n,t,i){var u;return(i||(i=e),t!==r&&typeof t=="number"?u=t:t!==r&&typeof t=="object"&&(i=t),n instanceof Date&&u===r)?it(n.getTime(),i):n instanceof Date&&u!==r?(u=t,b(n.getTime(),u,i)):u===r?rt(n,i):k(n,u,i)};return u.delay=function(n,t){return t||(t=e),n instanceof Date?et.call(this,n.getTime(),t):d.call(this,n,t)},u.throttle=function(n,t){t||(t=e);var i=this;return new f(function(r){var e=new s,u=!1,f=0,l,h=null;return l=i.subscribe(function(i){var s,o;u=!0,h=i,f++,s=f,o=new c,e.disposable(o),o.disposable(t.scheduleWithRelative(n,function(){if(u&&f===s)r.onNext(h);u=!1}))},function(n){e.dispose();r.onError(n);u=!1,f++},function(){if(e.dispose(),u)r.onNext(h);r.onCompleted(),u=!1,f++}),new o(l,e)})},u.windowWithTime=function(n,t,i){var h=this,u;return t===r&&(u=n),i===r&&(i=e),typeof t=="number"?u=t:typeof t=="object"&&(u=n,i=t),new f(function(t){var y,w,f=u,e=n,r=[],v,b=new s,k=0;w=new o(b),v=new p(w),y=function(){var o,n,s,h,p;s=new c,b.disposable(s),n=!1,o=!1,e===f?(n=!0,o=!0):e<f?n=!0:o=!0,h=n?e:f,p=h-k,k=h,n&&(e+=u),o&&(f+=u),s.disposable(i.scheduleWithRelative(p,function(){var i;if(o){i=new l,r.push(i);t.onNext(a(i,v))}n&&(i=r.shift(),i.onCompleted()),y()}))},r.push(new l);t.onNext(a(r[0],v));return y(),w.add(h.subscribe(function(n){for(var i,t=0;t<r.length;t++){i=r[t];i.onNext(n)}},function(n){for(var u,i=0;i<r.length;i++){u=r[i];u.onError(n)}t.onError(n)},function(){for(var i,n=0;n<r.length;n++)i=r[n],i.onCompleted();t.onCompleted()})),v})},u.windowWithTimeOrCount=function(n,t,i){var r=this;return i||(i=e),new f(function(u){var h,y,v=0,e,f,b=new s,w=0;y=new o(b),e=new p(y),h=function(t){var r=new c;b.disposable(r),r.disposable(i.scheduleWithRelative(n,function(){var n;if(t===w){v=0,n=++w,f.onCompleted(),f=new l;u.onNext(a(f,e));h(n)}}))},f=new l;u.onNext(a(f,e));return h(0),y.add(r.subscribe(function(n){var i=0,r=!1;f.onNext(n);if(v++,v===t){r=!0,v=0,i=++w,f.onCompleted(),f=new l;u.onNext(a(f,e))}r&&h(i)},function(n){f.onError(n);u.onError(n)},function(){f.onCompleted(),u.onCompleted()})),e})},u.bufferWithTime=function(n,t,i){var u;return t===r&&(u=n),i||(i=e),typeof t=="number"?u=t:typeof t=="object"&&(u=n,i=t),this.windowWithTime(n,u,i).selectMany(function(n){return n.toArray()})},u.bufferWithTimeOrCount=function(n,t,i){return i||(i=e),this.windowWithTimeOrCount(n,t,i).selectMany(function(n){return n.toArray()})},u.timeInterval=function(n){var t=this;return n||(n=e),v(function(){var i=n.now();return t.select(function(t){var r=n.now(),u=r-i;return i=r,{value:t,interval:u}})})},u.timestamp=function(n){return n||(n=e),this.select(function(t){return{value:t,timestamp:n.now()}})},u.sample=function(n,t){return(t||(t=e),typeof n=="number")?g(this,ut(n,t)):g(this,n)},u.timeout=function(n,t,i){var r,u=this;return t||(t=y(new Error("Timeout"))),i||(i=e),r=n instanceof Date?function(n,t){i.scheduleWithAbsolute(n,t)}:function(n,t){i.scheduleWithRelative(n,t)},new f(function(i){var h,f=0,a=new c,l=new s,e=!1,v=new s;return l.disposable(a),h=function(){var u=f;v.disposable(r(n,function(){var n;e=f===u,n=e,n&&l.disposable(t.subscribe(i))}))},h(),a.disposable(u.subscribe(function(n){var t=!e;if(t){f++;i.onNext(n);h()}},function(n){var t=!e;if(t){f++;i.onError(n)}},function(){var n=!e;n&&(f++,i.onCompleted())})),new o(l,v)})},h.generateWithAbsoluteTime=function(n,t,i,r,u,o){return o||(o=e),new f(function(f){var h=!0,s=!1,c,e=n,l;return o.scheduleRecursiveWithAbsolute(o.now(),function(n){if(s)f.onNext(c);try{h?h=!1:e=i(e),s=t(e),s&&(c=r(e),l=u(e))}catch(o){f.onError(o);return}s?n(l):f.onCompleted()})})},h.generateWithRelativeTime=function(n,t,i,r,u,o){return o||(o=e),new f(function(f){var h=!0,s=!1,c,e=n,l;return o.scheduleRecursiveWithRelative(0,function(n){if(s)f.onNext(c);try{h?h=!1:e=i(e),s=t(e),s&&(c=r(e),l=u(e))}catch(o){f.onError(o);return}s?n(l):f.onCompleted()})})},u.delaySubscription=function(n,t){return t||(t=e),this.delayWithSelector(ft(n,t),function(){return nt()})},u.delayWithSelector=function(n,t){var u=this,i,r;return typeof n=="function"?r=n:(i=n,r=t),new f(function(n){var t=new o,l=!1,e=function(){l&&t.length===0&&n.onCompleted()},f=new s,h=function(){f.setDisposable(u.subscribe(function(i){var f,u;try{f=r(i)}catch(o){n.onError(o);return}u=new c,t.add(u),u.setDisposable(f.subscribe(function(){n.onNext(i);t.remove(u),e()},n.onError.bind(n),function(){n.onNext(i);t.remove(u),e()}))},n.onError.bind(n),function(){l=!0,f.dispose(),e()}))};return i?f.setDisposable(i.subscribe(function(){h()},n.onError.bind(onError),function(){h()})):h(),new o(f,t)})},u.timeoutWithSelector=function(n,t,i){n||(n=observableNever()),i||(i=y(new Error("Timeout")));var r=this;return new f(function(u){var f=new s,l=new s,a=new c,e;f.setDisposable(a);var h=0,y=!1,v=function(n){var e=h,t=function(){return h===e},r=new c;l.setDisposable(r),r.setDisposable(n.subscribe(function(){t()&&f.setDisposable(i.subscribe(u)),r.dispose()},function(n){if(t())u.onError(n)},function(){t()&&f.setDisposable(i.subscribe(u))}))};return v(n),e=function(){var n=!y;return n&&h++,n},a.setDisposable(r.subscribe(function(n){if(e()){u.onNext(n);var i;try{i=t(n)}catch(r){u.onError(r);return}v(i)}},function(n){if(e())u.onError(n)},function(){e()&&u.onCompleted()})),new o(f,l)})},u.throttleWithSelector=function(n){var t=this;return new f(function(i){var f,r=!1,e=new s,u=0,h=t.subscribe(function(t){var h,s,o;try{h=n(t)}catch(l){i.onError(l);return}r=!0,f=t,u++,s=u,o=new c,e.setDisposable(o),o.setDisposable(h.subscribe(function(){if(r&&u===s)i.onNext(f);r=!1,o.dispose()},i.onError.bind(i),function(){if(r&&u===s)i.onNext(f);r=!1,o.dispose()}))},function(n){e.dispose();i.onError(n);r=!1,u++},function(){if(e.dispose(),r)i.onNext(f);i.onCompleted(),r=!1,u++});return new o(h,e)})},u.skipLastWithTime=function(n,t){t||(t=e);var i=this;return new f(function(r){var u=[];return i.subscribe(function(i){var f=t.now();for(u.push({interval:f,value:i});u.length>0&&f-u[0].interval>=n;)r.onNext(u.shift().value)},r.onError.bind(r),function(){for(var i=t.now();u.length>0&&i-u[0].interval>=n;)r.onNext(u.shift().value);r.onCompleted()})})},u.takeLastWithTime=function(n,t,i){return this.takeLastBufferWithTime(n,t).selectMany(function(n){return tt(n,i)})},u.takeLastBufferWithTime=function(n,t){var i=this;return t||(t=e),new f(function(r){var u=[];return i.subscribe(function(i){var r=t.now();for(u.push({interval:r,value:i});u.length>0&&r-u[0].interval>=n;)u.shift()},r.onError.bind(r),function(){for(var e=t.now(),f=[],i;u.length>0;)i=u.shift(),e-i.interval<=n&&f.push(i.value);r.onNext(f);r.onCompleted()})})},u.takeWithTime=function(n,t){var i=this;return t||(t=e),new f(function(r){var u=t.scheduleWithRelative(n,function(){r.onCompleted()});return new o(u,i.subscribe(r))})},u.skipWithTime=function(n,t){var i=this;return t||(t=e),new f(function(r){var u=!1,f=t.scheduleWithRelative(n,function(){u=!0}),e=i.subscribe(function(n){if(u)r.onNext(n)},r.onError.bind(r),r.onCompleted.bind(r));return new o(f,e)})},u.skipUntilWithTime=function(n,t){t||(t=e);var i=this;return new f(function(r){var u=!1,f=t.scheduleWithAbsolute(n,function(){u=!0}),e=i.subscribe(function(n){if(u)r.onNext(n)},r.onError.bind(r),r.onCompleted.bind(r));return new o(f,e)})},u.takeUntilWithTime=function(n,t){t||(t=e);var i=this;return new f(function(r){return new o(t.scheduleWithAbsolute(n,function(){r.onCompleted()}),i.subscribe(r))})},i});
//@ sourceMappingURL=rx.time.min.js.map