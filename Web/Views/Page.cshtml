@model PageModel
@using erecruit.Utils

@{ ViewBag.Title = Model.Page.Title; }
@section LeftSidebar {
		@if ( Model.ChildPages.Any() ) { 
			<h1 class="left-sidebar-title">В этом разделе</h1>
			<div class="sidenav">@Pages( Model.ChildPages )</div>
		}
}

@if ( Model.AllowEdit ) {
	<div class="autobind" data-controller="PageVm, BL/page" data-args="{ id: @Model.Page.Id }">
		@if ( !Model.Page.Title.NullOrEmpty() ) { <h2>@Model.Page.Title</h2> }
		@Html.Raw( Model.Page.HtmlText )
	</div>
}
else {
	<h2>@Model.Page.Title</h2>
	@Html.Raw( Model.Page.HtmlText )
}

@helper Pages( IEnumerable<PageModel> pages ) {
	<ul>
		@foreach ( var p in pages ) {
			<li>
				<a href="@Url.Content( p.Page.Url )">@( p.Page.ReferenceName.NullOrEmpty() ? p.Page.Title : p.Page.ReferenceName)</a>
				@if ( !p.ChildPages.NullOrEmpty() ) { <text>@Pages( p.ChildPages )</text> }
			</li>
		}
	</ul>
}